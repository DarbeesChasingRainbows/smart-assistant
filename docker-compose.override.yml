# Development override with build optimizations
version: "3.8"

services:
  api:
    build:
      context: ./LifeOS
      dockerfile: Containerfile.optimized
      # Enable build cache
      cache_from:
        - type=local,src=/tmp/.buildx-cache
      cache_to:
        - type=local,dest=/tmp/.buildx-cache
      # Parallel build support
      x-bake:
        cache-from:
          - type=local,src=/tmp/.buildx-cache
        cache-to:
          - type=local,dest=/tmp/.buildx-cache,mode=max
        # Enable BuildKit parallelism
        args:
          BUILDKIT_INLINE_CACHE: "1"
